/*! Resultados Digitais - rd-js-integration 2015-10-23 */
function RDStationFormIntegration(a,b,c){"use strict";RdIntegration.integrate(a,b,c)}var RdIntegration=function(){"use strict";var a,b,c,d,e,f,g=["captcha","_wpcf7","_wpcf7_version","_wpcf7_unit_tag","_wpnonce","_wpcf7_is_ajax_call","_wpcf7_locale"],h=["email","e-mail","e_mail","email_lead","your-email"],i=function(a){"undefined"==typeof jQuery?l("http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js",a):a()},j=function(a,b,c){i(function(){f=jQuery,k(a,b,c),m()})},k=function(a,e,f){d=f||{},b=a,c=e},l=function(a,b){var c=document.getElementsByTagName("head")[0],d=document.createElement("script");d.type="text/javascript",d.src=a,d.onload=b,d.onreadystatechange=function(){"complete"===this.readyState&&b()},c.appendChild(d)},m=function(){f(":submit").click(n)},n=function(b){if(e=x(),a=o(b.target)){var c=p();y(c)&&("function"!=typeof a[0].checkValidity||a[0].checkValidity())&&(F(c,s),b.preventDefault())}},o=function(a){return f(a).closest("form")},p=function(){var b=f(a).find(":input");return b=u(b),b=b.serializeArray(),b=q(b),b.push(e.identifier,e.token,e.c_utmz,e.traffic_source,B(),C()),b},q=function(a){return d.fieldMapping&&(a=r(a)),a},r=function(a){return f.each(a,function(){var a=d.fieldMapping[this.name];a&&(this.name=a)}),a},s=function(){a.submit()},t=function(a){return f(a).is(":password")},u=function(a){return a=a.map(function(){return v(this)?this:void 0})},v=function(a){return z(a)||!(t(a)||w(a))},w=function(a){var b=f(a).attr("name")||"";return b&&g.indexOf(b.toLowerCase())>=0},x=function(){return{identifier:{name:"identificador",value:c},token:{name:"token_rdstation",value:b},c_utmz:{name:"c_utmz",value:A("__utmz")},traffic_source:{name:"traffic_source",value:A("__trf.src")}}},y=function(a){var b=!1;return f.each(a,function(){return z(this)?(this.name="email",b=!0,!1):void 0}),b},z=function(a){return h.indexOf(a.name.toLowerCase())>=0},A=function(a){var b,c,d=document.cookie.split(";");for(a+="=",b=0;b<d.length;b++){for(c=d[b];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(a))return c.substring(a.length,c.length)}return null},B=function(){return{name:"referrer",value:document.referrer}},C=function(){return{name:"query_params",value:location.search.substring(1)}},D=function(){var a=A("rdtrk");return null!==a?(a=JSON.parse(unescape(a)),a.id):void 0},E=function(a){var b=D();return"undefined"!=typeof b&&a.push({name:"client_id",value:b}),a},F=function(a,b){a=E(a),i(function(){jQuery.ajax({type:"POST",url:"https://www.rdstation.com.br/api/1.3/conversions",data:a,crossDomain:!0,xhrFields:{withCredentials:!0},error:function(a){console.log("ERROR - "),console.log(a)},complete:function(a,c){b&&b(a,c)}})})};return{integrate:j,post:F}}();